---
interface Props {
  id: string;
  name: string;
  category: string;
  categorySlug: string;
  image?: string;
  location: string;
  rating: number;
  reviewCount: number;
  price?: string;
  isPremium?: boolean;
  isVerified?: boolean;
}

const { 
  id, 
  name, 
  category, 
  categorySlug,
  image, 
  location, 
  rating, 
  reviewCount, 
  price,
  isPremium = false,
  isVerified = false 
} = Astro.props;

const stars = Array.from({ length: 5 }, (_, i) => i < Math.floor(rating));
---

<a href={`/serviciu/${id}`} class="service-card">
  <div class="service-card__image">
    {image ? (
      <img src={image} alt={name} loading="lazy" />
    ) : (
      <div class="service-card__placeholder">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <polyline points="21 15 16 10 5 21"/>
        </svg>
      </div>
    )}
    
    {isPremium && (
      <div class="service-card__badge">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
        </svg>
        Premium
      </div>
    )}
    
    <button class="service-card__favorite" aria-label="AdaugÄƒ la favorite">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
    </button>
  </div>
  
  <div class="service-card__content">
    <div class="service-card__category">{category}</div>
    <h3 class="service-card__title">
      {name}
      {isVerified && (
        <svg width="18" height="18" viewBox="0 0 24 24" fill="#00d4aa" style="display: inline; vertical-align: middle; margin-left: 4px;">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
      )}
    </h3>
    
    <div class="service-card__location">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
        <circle cx="12" cy="10" r="3"/>
      </svg>
      {location}
    </div>
    
    <div class="service-card__footer">
      <div class="rating">
        {stars.map((filled) => (
          <svg class={`rating-star ${!filled ? 'rating-star--empty' : ''}`} viewBox="0 0 24 24" fill="currentColor">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        ))}
        <span class="rating-value">{rating.toFixed(1)}</span>
        <span class="rating-count">({reviewCount})</span>
      </div>
      
      {price && (
        <div class="service-card__price">
          {price} <span>/ serviciu</span>
        </div>
      )}
    </div>
  </div>
</a>

<style>
  .service-card__placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-secondary);
  }
</style>
